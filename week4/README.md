2025-11-10 mon


# summary 📖


### 6장 명확하고 간결한 주석 달기

앞 장까지는 주석이 무엇을 설명하는지 살펴보았다. 이ㄴ 장에서는 주석을 어떻게 **명확하고 간결하게 다는지** 살펴본다.
<br>


- 주석을 간결하게 하라
- 모호한 대명사는 피하라 (it, this 등)
- 엉터리 문장을 다듬어라
- 함수의 동작을 명확하게 설명하라

  `예) '이 파일에 담긴 줄 수를 반환한다' 대신 '파일 안에 개행 문자가 몇 개 있는지 센다'`
- 구체적인 용법을 설명해주는 입/출력 예를 사용하라
- 코드의 의도를 명시하라

  `예) '리스트를 역순으로 반복한다' 대신 '각 가격을 높은 값에서 낮은 값 순으로 나타낸다.' → 의도 파악, 중복 검사`
- 이름을 가진 함수 파라미터 주석

  |언어|형식| 
  |---|---|
  |파이썬| def Connect(timeout, use_encryption): ... <br> Connect(**timeout** = 10, **use_encryption** = False)|
  |C++, Java|Connect(/* timeout_ms = */ 10, /*use_encryption = */ false);|
- 정보 축약형 단어를 사용하라 (캐시 계층, 표준화 등 ...)

<br>

---
Part 1은 표면적 수준에서의 개선이었다.

이제부터는 프로그램의 흐름제어, 논리식, 변수에 대한 논의이다.
코드에 부과되는 정신적 짐을 최소화한다.

## Part 2 : 루프와 논리를 단순화하기

### 7장 읽기 쉽게 흐름제어 만들기

#### 흐름을 제어하는 조건과 루프, 그리고 여타 요소를 최대한 **자연스럽게** 만들도록 노력하라.
- 조건문에서 인수의 순서 <br>
  |왼쪽|오른쪽|
  |---|---|
  |값이 더 유동적인, 질문을 받는 표현|더 고정적인 값으로, 비교대상|
- if/else 블록의 순서<br>
    - 부정이 아닌 긍정 다루기 ( if(!debug)가 아닌 if(debug) 선호) <br>
    - 간단한 것 먼저 처리
    - 더 흥미롭고 확실한 것 먼저 다루기
- 삼항 연산자를 이용하는 조건문 표현<br> → 기본적으로 if/else 이용, 줄 수 최소화보다 이해하는 시간을 최소화하는 일이 더 중요하다.
- do/while 루프를 피하라
- 함수 중간에서 반환하기
    - 반환 포인트를 하나만 두려는 것은 함수의 끝부분에서 실행되는 클린업 코드의 호출을 보장하려는 의도
    - 다른 언어는 클린업 코드를 위한 관용적 구조가 존재하나, C는 그렇지 않다
    - 따라서 여러 C 프로젝트에서 goto를 발견할 수 있다 (예. 리눅스 커널)
        - 다만 goto를 잘못 쓰면 스파게티 코드가 양산된다. <br>
        *스파게티 코드는 코드의 흐름이 복잡하고 뒤엉켜 있어서, 마치 삶은 스파게티 면처럼 꼬여 있는 프로그램 구조. 즉, 프로그램의 제어 흐름을 한눈에 이해하기 어렵고, 수정이나 유지보수가 거의 불가능한 상태.*
- 중첩을 최소화하기
    - 실패한 경우들을 최대한 빠르게 처리하고 함수에서 반환하여 제거
    - 루프 내부에 중첩된 코드가 있는 경우 continue를 사용
- 실행 흐름을 따라올 수 있는가?
    - 프로그램의 전체 실행 경로를 쉽게 따라갈 수 있게 만드는 것이 궁극의 목표
    - 스레딩, 시그널/인터럽트 핸들러, 예외, 함수 포인터 & 익명 함수, 가상 메소드의 경우 프로그램 흐름이 혼란스러워질 수 있다
    - 따라서 이러한 구조가 찾지하는 비율이 너무 높지 않아야 한다.

<br>

### 8장 거대한 표현을 잘게 쪼개기
#### 거대한 표현을 더 소화하기 쉬운 여러 조각으로 나눈다.

- 설명 변수/추가 변수 : 하위 표현의 의미 설명
- 요약 변수 : 커다란 코드의 덩어리를 짧은 이름으로 대체하여 쉽게 관리하고 파악하는 변수
- 드모르간의 법칙 사용 
- 쇼트 서킷 논리 오용하지 않기 : 다른 이에게 혼란을 초래할 수 있음
- 복잡한 논리는 우아하게 접근... (반대되는 방법으로 해결 등)
- 동일한 부분 요약 변수로 추출하기 
- 다른 변수, 같은 일 수행 시 C++에서 매크로 정의하여 구현
    ```
    void AddStats(const Stats& add_from, Stats* add_to) {
        add_to->set_total_memory(add_from.total_memory() + add_to->total_memory());
        add_to->set_free_memory(add_from.free_memory() + add_to->free_memory());
        add_to->set_swap_memory(add_from.swap_memory() + add_to->swap_memory());
        ...
    }
    ```
    다음과 같이 변경
    ```
    #define ADD_FIELD(field) add_to->set_##field(add_from.field() + add_to->field())
    
    ADD_FIELD(total_memory);
    ADD_FIELD(free_memory);
    ADD_FIELD(swap_memory);
    ...
    ```
<br>

# insight 💡
지금껏 변수명을 짓는데는 많은 고민을 하지 않아 책이 금방 읽혔는데, Part 2부터는 내가 어떻게 코딩했는지 비교하며 읽어 읽는데 시간이 꽤 걸렸다. 나는 C로 코딩을 많이 하기 때문에 다른 언어의 코드를 볼 일이 많지 않은데, 오늘 책을 읽으며 Python, C++, Java 등의 코드를 볼 수 있었고, 다른 언어에도 흥미가 생겼다. <br>
또한 스파게티 코드, 요다 표기법 등 생소하지만 흥미로운 표현들이 많이 나와 다양한 용어를 알게될 수 있어서 좋았다.